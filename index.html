<html>
	<head>
		<title>Departure Board</title>
		<link rel="stylesheet" href="./css/departure-board.css" />
		<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
	</head>
	
	<body>
		<div id="test"></div>
		
		<script src="./js/departure-board.js"></script>
		<script>
		
			var board = new DepartureBoard (document.getElementById ('test'), { rowCount: 3, letterCount: 17 }); 
			board.setValue(['NOW BOOTING', 'XXXXXXXXXXXXXXX']);
			
			window.setTimeout (function () {
				jQuery.ajax({
				    url: "https://svc.metrotransit.org/NexTrip/902/3/PSPK",
				    type: "GET",
				    data: {
				        "format": "json",
				    },
				})
				.done(function(data, textStatus, jqXHR) {
				    console.log("HTTP Request Succeeded: " + jqXHR.status);
				    console.log(data);
				    var time = new Date();
				    board.setValue([
				    	data[0]['DepartureText'] + " / " +  data[1]['DepartureText'],
				    	data[2]['DepartureText'] + " / " +  data[3]['DepartureText'],
				    	time.toTimeString()
				    	]);
				})
				.fail(function(jqXHR, textStatus, errorThrown) {
				    console.log("HTTP Request Failed");
				})
				.always(function() {
				    /* ... */
				});
			}, 10000);



		</script>
	</body>
</html>